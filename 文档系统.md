# 一、需求分析

## （一）业务需求

猿人云平台的规模随着业务的增长逐渐增加，支撑不同的品牌及其云端业务，云端服务规模也越来越大，但云端服务和外界的协作严重依赖协作文档，因此文档的安全性就变得非常重要。但一直使用的是外部公司的在线文档系统，出现任何问题，我们都无法接受和处理，因此，自建文档系统的需求必须提上日程。

猿人云平台文档系统主要为平台用户服务，包括公司内部的技术开发、测试、运营、产品以及公司外部开发、工厂合作人员，所以根据用户文档受众，可以将文档需求分为**开发者文档**、**项目文档**、**帮助文档**三大类，具体细分类型如下导图：

![图片](https://uploader.shimo.im/f/fPR5zeDLW1BEpV2a.png!thumbnail?fileGuid=hqvvYpYHK3xHy3kK)

## （二）功能需求

1. 基础功能需求
#### **（1）文档编辑**

文档系统要支持富文本类型的文档，因此需要支持图文、链接、表格等形式内容编辑。

另外，文档的编辑者可能是非开发人员，所以除了需要支持 markdown 格式编写以外，同样还需要支持富文本编辑功能。

#### **（2）文档浏览**

一个文档系统的好坏，大比重要看文档浏览者的使用感受。

在使用感受上，主要从文档结构化展示和快捷查找目标文档的角度考虑，所以需要支持展示文档目录和支持全文搜索功能。

另外，文档浏览的终端可能是PC、移动端，所以文档浏览页的页面 UI 需要同时支持这两类终端的自适应功能。

#### **（3）文档分享**

文档编辑成功后，需要发给对应目标用户，目标用户如果是平台外用户，则涉及到文档安全问题，因此文档分享时，需要支持加密分享，必须一定的密钥才能查看文档，以此增强文档的安全性。

2. 特殊功能需求

基本功能完全能够满足项目和帮助文档的正常使用，但开发者文档相对较为特殊，是开发者主要沟通协作的桥梁，文档的数量非常多，且由于终端业务变动大，对应的服务变动引发的文档编辑、修改的频率非常高，尤其是**接口文档**、**RPC接口文档**和**数据库字典文档。**

针对大量的接口文档，普通开发人员的工作流程是**开发->测试->编写文档**，但一般开发一个功能模块会有多个接口，那此时这个工作流程的每一步的工作量都会随着接口量的增加而增加，因此，**为了相对降低开发人员的工作量**，主要从前两步入手，目前已有较好的解决方案如下：

>（1）开发代码中添加文档注释：自动化脚本通过对代码中的注释解析生成接口文档。
>优点：代码中接口说明注释清晰明了；文档和代码统一管理。
>缺点：需要额外注释入侵代码，开发工作量相对增加。
>（2）测试用例中添加参数说明：接口测试工具自动生成接口文档。
>优点：相对代码中添加注释，减少了代码中的注释入侵；测试参数说明清晰明了。
>缺点：测试用例的文字说明必须完整，测试环节工作量会相对增加。

目前由于平台是开发驱动业务开展，而开发端的沉淀更多偏重于代码，且 RPC 类方法在接口测试工具中普及性并不高，所以对比以上两个方案，第一个方案更加符合需求。但如果是测试驱动开发的工作模式，则第二种方案更优。

另外对于像数据库这类结构化内容，更加适合通过自动化脚本生成对应的数据库字典文档，同时这种方案可以反逼开发人员在做数据库设计时必须完善相关文字说明，以此也能增加项目的可传承性。

因此，根据以上需求分析，特殊功能需求具体如下：

>（1）可利用自动化脚本从代码注释中生成接口或RPC文档；
>（2）可利用自动化脚本从数据库中生成数据库字典文档。
# 二、研发方向

## （一）研发方向分析

最简单的研发方向当然是自主研发文档系统，完全按需自定义研发，但是，自主研发就目前而言有两个非常严重的问题。

其一，因为文档系统还没有在工作中实际扩展开来应用，因此对于文档系统的真实业务需求还不是足够清晰和可靠。

另外，自主研发的时间必然很长，如果没有立项，自主研发项目过程必然断断续续，也没有公司的测试和项目规划支持，肯定存在大量时间问题，用不了，开发计划又一直搁浅，这个结果肯定不理想。

因此，排除当下自主研发的想法，目的是尽快部署一个开源、能满足当前需求的文档系统，先在业务中开展工作，根据实际使用情况，整理问题，立项进行二次开发，个性化满足平台更多的需求，逐渐完成一个完善的文档系统。后续根据已完善的文档系统需求，可以再重新立项，采用更合理的技术架构，更合理的前端设计，完全自主研发。

![图片](https://uploader.shimo.im/f/LvMbJIZxTjQpf1of.png!thumbnail?fileGuid=hqvvYpYHK3xHy3kK)

## （二）开源项目调研

根据研发方向分析，首要找到一个合适的开源文档系统是最关键的一步，因此，对市场已有开源文档系统的调研是必要的工作。

由于目前

# 三、开源调研



# 四、玩转 ShowDoc

## （一）ShowDoc介绍

## （二）本地部署

## （三）二次开发

## （四）自动化生成接口文档

### （五）自动化生成数据库字典



